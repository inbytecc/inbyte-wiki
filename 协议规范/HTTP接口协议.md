# **HTTP接口协议**

## **协议使用范围**

App、公众号、微信、抖音、支付宝小程序接口



## **协议安全**

使用 HTTP + TLS，即 HTTPS



## **请求方法**

GET、POST、PUT、PATCH、DELETE

小程序端只用 GET、POST 请求，为了兼容不同平台小程序



## **数据**

● POST、PUT、PATCH方法接口使用 Request Body JSON格式交互数据；

● GET、DELETE 方法，使用 Query Params 提交参数；

具体参照接口文档；



## **字符编码:**

均使用 UTF-8 字符集编码。



## **请求头:**

● 默认: Content-Type:application/json;charset=UTF-8

● 上传文件时: multipart/form-data

● 登录接口获得 userToken 后，将值设置为 Authorization，作为后续交互用户认证相关使用



## **响应头**

● 默认 Content-Type：application/json;charset=UTF-8

○ Excel导出时：application/vnd.ms-excel

○ 图片下载：image/jpeg

### 

## **响应体**

| **参数名称** | **类型** | **必填** | **说明**             |
| ------------ | -------- | -------- | -------------------- |
| status       | int      | 是       | 状态码，参照下方说明 |
| msg          | String   | 否       | 提示信息             |
| data         | JSON     | 否       | 业务数据传输对象     |



## **状态码**

状态码分为【HTTP 协议状态码】，与【业务状态】

### **HTTP协议状态码**

处理以下状态即可

| 状态码 | 说明         | 处理                                                         |
| ------ | ------------ | ------------------------------------------------------------ |
| 200    | 请求成功     | 正常处理业务                                                 |
| 301    | 永久重定向   | 将当前请求域名，替换响应头【Location】字段内容重新发起请求   |
| 302    | 临时重定向   | 同上                                                         |
| 400    | 客户端错误   | 一般开发期间错误，参考协议问题                               |
| 405    | 请求方法错误 | 确认是否用错请求方法比如 Get，Post，Delete，Patch，Put用错或是地址错误 |
| 500    | 服务端错误   | 显示异常占位图                                               |
| 502    | 网关错误     | 显示异常占位图                                               |
| 503    | 服务器繁忙   | 服务器繁忙，稍后再试，异常占位图秒杀业务会用                 |



### **业务状态码**

| 状态码   | 说明                            | 处理                                                         |
| -------- | ------------------------------- | ------------------------------------------------------------ |
| 200      | 业务处理成功                    | 正常处理业务                                                 |
| 400      | 业务处理失败                    | 提示 message 内容                                            |
| 401      | Session 无效或未登录            | 小程序获取 openId 静默登录App程序拉取登录窗口                |
| 4010     | 需要绑定手机号                  | 拉起手机号授权窗口                                           |
| 4011     | 未实名认证                      | 暂时先不处理                                                 |
| 4012     | AppToken失效                    | 静默重新调用App签名接口[Apifox](https://www.apifox.cn/link/project/2245110/apis/api-60118140) |
| 其他状态 | 接口规约的，参考对应处理        |                                                              |
|          | 未规约的，默认提示 message 内容 |                                                              |

## 

## **分页说明**

## **小程序端**

### **请求参数**

● pageNum 表示当前页，从1开始；

● pageSize 表示一页返回多少行数据；

### **响应数据**

不返回数据行数，当下拉获取下一页接口返回为空时，不进行下一步更新，底部显示【没有更多数据啦】



## **后台系统端**

### **请求参数**

● pageNum 表示当前页，从1开始；

● pageSize 表示一页返回多少行数据；



### **响应数据**

● 后台系统，需要显示总行数的，携带 totalItem，表示当前查询结果总行数